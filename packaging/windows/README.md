## Build exe

```powershell
powershell -ExecutionPolicy Bypass ./packaging/windows/package_executable.ps1
```

Script options:
* `--skip-winget`: Skip installing/upgrading system dependencies via winget
* `--skip-gvsbuild`: Skip installing/upgrading system dependencies via gvsbuild
* `--clean-gvsbuild`: Does a clean build of gvsbuild
* `--cli-only`: Skips gvsbuild and builds only `lada-cli.exe`

> [!TIP]
> If you updated `gvsbuild`, `uv` or `python` do a clean build (`--clean-gvsbuild`)

> [!TIP]
> If you get a build error about *Clock skew* check you Date & Time settings. If it doesn't work rewrite timestamps:
> ```Powershell
> $now = (Get-Date)
> Get-ChildItem -Path ./build_gtk_release/build -Recurse | ForEach-Object { $_.LastWriteTime = $now }
> ```

> [!TIP]
> After doing major packaging changes that involve system dependencies test the exe on another pristine Windows VM.
> 
> This makes sure that PyInstaller picked up all required dependencies which are available on the build machine but maybe aren't on the users Windows installation.

## Publish exe

* Attach both `lada-<version>.7z.001` and `lada-<version>.7z.002` to GitHub Release (rag-and-drop to the Draft Release) 
* Upload `lada-<version>.7z` to https://pixeldrain.com
* Add Pixeldrain download link and link to GitHub Release to both Draft Releases on GitHub and Codeberg

## Update python dependencies

The `requirements.txt` file is generated by `uv export` based on `uv.lock` located in the root of the project.

See packaging [README.md](../README.md) for context.